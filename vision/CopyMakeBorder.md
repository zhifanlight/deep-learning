<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

# 边缘填充

&nbsp;

## 原理分析

- 为方便进行卷积操作，有时需要在原始图像周围进行填充

- 假设要在矩阵\\(A = \\left[ \\begin{matrix} 1 & 2 & 3 & 4 & 5 \\\\ 6 & 7 & 8 & 9 & 10 \\\\ 11 & 12 & 13 & 14 & 15 \\\\ 16 & 17 & 18 & 19 & 20 \\\\ 21 & 22 & 23 & 24 & 25 \\end{matrix} \\right] \\) 上、下、左、右各填充 2 行／列，最终得到矩阵 \\( B \\)

- 常见方法

	- 常量填充

		- 需要填充的位置全部用给定的常量 \\( x \\) 代替

		$$ B = \\left[ \\begin{matrix} x & x & x & x & x & x & x & x & x \\\\ x & x & x & x & x & x & x & x & x \\\\ x & x & 1 & 2 & 3 & 4 & 5 & x & x \\\\ x & x & 6 & 7 & 8 & 9 & 10 & x & x \\\\ x & x & 11 & 12 & 13 & 14 & 15 & x & x \\\\ x & x & 16 & 17 & 18 & 19 & 20 & x & x \\\\ x & x & 21 & 22 & 23 & 24 & 25 & x & x \\\\ x & x & x & x & x & x & x & x & x \\\\ x & x & x & x & x & x & x & x & x \\end{matrix} \\right] $$

	- 边缘复制

		- 用最近的行／列进行填充

		$$ B = \\left[ \\begin{matrix} 1 & 1 & 1 & 2 & 3 & 4 & 5 & 5 & 5 \\\\ 1 & 1 & 1 & 2 & 3 & 4 & 5 & 5 & 5 \\\\ 1 & 1 & 1 & 2 & 3 & 4 & 5 & 5 & 5 \\\\ 6 & 6 & 6 & 7 & 8 & 9 & 10 & 10 & 10 \\\\ 11 & 11 & 11 & 12 & 13 & 14 & 15 & 15 & 15 \\\\ 16 & 16 & 16 & 17 & 18 & 19 & 20 & 20 & 20 \\\\ 21 & 21 & 21 & 22 & 23 & 24 & 25 & 25 & 25 \\\\ 21 & 21 & 21 & 22 & 23 & 24 & 25 & 25 & 25 \\\\ 21 & 21 & 21 & 22 & 23 & 24 & 25 & 25 & 25 \\end{matrix} \\right] $$
	
	- 普通边缘对称

		- 新填充的行／列是原图像相邻行／列的镜像，即 \\( 210012 \\) 型

		$$ B = \\left[ \\begin{matrix} 7 & 6 & 6 & 7 & 8 & 9 & 10 & 10 & 9 \\\\ 2 & 1 & 1 & 2 & 3 & 4 & 5 & 5 & 4 \\\\ 2 & 1 & 1 & 2 & 3 & 4 & 5 & 5 & 4 \\\\ 7 & 6 & 6 & 7 & 8 & 9 & 10 & 10 & 9 \\\\ 12 & 11 & 11 & 12 & 13 & 14 & 15 & 15 & 14 \\\\ 17 & 16 & 16 & 17 & 18 & 19 & 20 & 20 & 19 \\\\ 22 & 21 & 21 & 22 & 23 & 24 & 25 & 25 & 24 \\\\ 22 & 21 & 21 & 22 & 23 & 24 & 25 & 25 & 24 \\\\ 17 & 16 & 16 & 17 & 18 & 19 & 20 & 20 & 19 \\end{matrix} \\right] $$
	
	- 101 型边缘对称

		- 新填充的行／列与原图像关于最近的行／列对称，即 \\( 21012 \\) 型

		$$ B = \\left[ \\begin{matrix} 13 & 12 & 11 & 12 & 13 & 14 & 15 & 14 & 13 \\\\ 8 & 7 & 6 & 7 & 8 & 9 & 10 & 9 & 8 \\\\ 3 & 2 & 1 & 2 & 3 & 4 & 5 & 4 & 3 \\\\ 8 & 7 & 6 & 7 & 8 & 9 & 10 & 9 & 8 \\\\ 13 & 12 & 11 & 12 & 13 & 14 & 15 & 14 & 13 \\\\ 18 & 17 & 16 & 17 & 18 & 19 & 20 & 19 & 18 \\\\ 23 & 22 & 21 & 22 & 23 & 24 & 25 & 24 & 23 \\\\ 18 & 17 & 16 & 17 & 18 & 19 & 20 & 19 & 18 \\\\ 13 & 12 & 11 & 12 & 13 & 14 & 15 & 14 & 13 \\end{matrix} \\right] $$

	- 外包装

		- 用原图像右边界填充左侧区域，下边界填充上侧区域，以此类推

		$$ B = \\left[ \\begin{matrix} 19 & 20 & 16 & 17 & 18 & 19 & 20 & 16 & 17 \\\\ 24 & 25 & 21 & 22 & 23 & 24 & 25 & 21 & 22 \\\\ 4 & 5 & 1 & 2 & 3 & 4 & 5 & 1 & 2 \\\\ 9 & 10 & 6 & 7 & 8 & 9 & 10 & 6 & 7 \\\\ 14 & 15 & 11 & 12 & 13 & 14 & 15 & 11 & 12 \\\\ 19 & 20 & 16 & 17 & 18 & 19 & 20 & 16 & 17 \\\\ 24 & 25 & 21 & 22 & 23 & 24 & 25 & 21 & 22 \\\\ 4 & 5 & 1 & 2 & 3 & 4 & 5 & 1 & 2 \\\\ 9 & 10 & 6 & 7 & 8 & 9 & 10 & 6 & 7 \\end{matrix} \\right] $$


&nbsp;

## Python 实现

- 常量填充

	```
	new_image = cv2.copyMakeBorder(image, top, bottom, left, right, cv2.BORDER_CONSTANT, value=x) 
	```

- 边缘复制

	```
	new_image = cv2.copyMakeBorder(image, top, bottom, left, right, cv2.BORDER_REPLICATE) 
	```

- 普通边缘对称

	```
	new_image = cv2.copyMakeBorder(image, top, bottom, left, right, cv2.BORDER_REFLECT) 
	```
	
- 101 型边缘对称（默认）

	```
	new_image = cv2.copyMakeBorder(image, top, bottom, left, right, cv2.BORDER_REFLECT101) 
	```
	
- 外包装

	```
	new_image = cv2.copyMakeBorder(image, top, bottom, left, right, cv2.BORDER_WRAP) 
	```